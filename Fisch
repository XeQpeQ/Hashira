local PlayerGUI = game.Players.LocalPlayer.PlayerGui
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local GuiService = game:GetService("GuiService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()
local VirtualUser = game:GetService("VirtualUser")
game.Players.LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)
local Window = OrionLib:MakeWindow({
    Name = "Hashira Hub",
    HidePremium = false,
    SaveConfig = false,
    ConfigFolder = "Orion"
})

local PlayerTab = Window:MakeTab({
    Name = "MainTab",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local UITab = Window:MakeTab({
    Name = "UI",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local AutoShakeConnection
local AutoCastConnection
local AutoCastConnection2

PlayerTab:AddToggle({
    Name = "Auto Shake",
    Callback = function(v)
        getgenv().AutoShake = v
    end
})

PlayerTab:AddToggle({
    Name = "Auto Reel",
    Callback = function(v)
        getgenv().AutoReel = v
    end
})

UITab:AddButton({
    Name = "Unload",
    Callback = function()
        if AutoShakeConnection then AutoShakeConnection:Disconnect() end
        if AutoCastConnection then AutoCastConnection:Disconnect() end
        if AutoCastConnection2 then AutoCastConnection2:Disconnect() end
        if getgenv().AutoShake or getgenv().AutoCast or getgenv().AutoReel then
          getgenv().AutoShake = false
          getgenv().AutoCast = false
          getgenv().AutoReel = false
        end
        OrionLib:Destroy()
    end
})

PlayerTab:AddToggle({
    Name = "Auto Cast",
    Callback = function(v)
        getgenv().AutoCast = v
        local Tool = LocalCharacter:FindFirstChildOfClass("Tool")
        if Tool and Tool:FindFirstChild("events"):WaitForChild("cast") and v == true then
            Tool.events.cast:FireServer(100)
        end
        task.wait()
        if getgenv().AutoCast then
            local oldpos = game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame
            while getgenv().AutoCast and task.wait() do
                if game.Players.LocalPlayer.Character.HumanoidRootPart then
                    game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = oldpos
                else
                    break
                end
            end
        end
    end
})

AutoShakeConnection = PlayerGUI.ChildAdded:Connect(function(GUI)
    if GUI:IsA("ScreenGui") and GUI.Name == "shakeui" and GUI:FindFirstChild("safezone") then
        GUI.safezone.ChildAdded:Connect(function(child)
            if child:IsA("ImageButton") and child.Name == "button" and getgenv().AutoShake then
                child.AnchorPoint = Vector2.new(0.5, 0.5)
                child.Position = UDim2.new(0.5, 0, 0.5, 0)
                task.wait(0.1)
                while getgenv().AutoShake and child.Visible and RunService.RenderStepped:Wait() do
                    pcall(function()
                        GuiService.SelectedObject = child
                        VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.Return, false, game)
                        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.Return, false, game)
                    end)
                end
                GuiService.SelectedObject = nil
            end
        end)
    end
end)

AutoShakeConnection = PlayerGUI.ChildAdded:Connect(function(GUI)
    if GUI:IsA("ScreenGui") and GUI.Name == "reel" and getgenv().AutoReel then
        local events = ReplicatedStorage:FindFirstChild("events")
        if events and events:FindFirstChild("reelfinished") then
            repeat
                task.wait(2)
                events.reelfinished:FireServer(100, false)
            until not GUI or not getgenv().AutoReel
        end
    end
end)

AutoCastConnection = game.Players.LocalPlayer.Character.ChildAdded:Connect(function(child)
    if child:IsA("Tool") and child:FindFirstChild("events") and child.events:FindFirstChild("cast") and getgenv().AutoCast then
        task.wait(2)
        child.events.cast:FireServer(100)
    end
end)

AutoCastConnection2 = PlayerGUI.ChildRemoved:Connect(function(GUI)
    if GUI.Name == "reel" and getgenv().AutoCast then
        local tool = game.Players.LocalPlayer.Character:FindFirstChildOfClass("Tool")
        if tool and tool:FindFirstChild("events") and tool.events:FindFirstChild("cast") then
            task.wait(2)
            tool.events.cast:FireServer(100)
        end
    end
end)
