local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local VirtualInputManager = game:GetService("VirtualInputManager")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local Part = Instance.new("Part", Workspace)
Part.Name = "TeleportS"
Part.CFrame = Workspace["Shaggy 1%"]:GetModelCFrame()
Part.Anchored = true
Part.Transparency = 1
Part.CanCollide = false

player.CharacterAdded:Connect(function()
    local args = {
        "galactic saiyan"
    }
    ReplicatedStorage:WaitForChild("Transform"):FireServer(unpack(args))
    wait(10)
    VirtualInputManager:SendKeyEvent(true, "X", false, game)
    wait(10)
    VirtualInputManager:SendKeyEvent(false, "X", false, game)
    player.Character.HumanoidRootPart.CFrame = CFrame.new(workspace.TeleportS.Position - workspace.TeleportS.CFrame.LookVector * 1, workspace.TeleportS.Position)
    while wait() do
    local boss = Workspace:FindFirstChild("Shaggy 1%")
    
    if boss and boss:FindFirstChild("Humanoid") then
        while wait() do
            -- Verificar la salud del boss
            if boss.Humanoid.Health <= 0 then
                player.Character.Humanoid.Health = 0
            end
            
            -- Verificar la existencia y salud del jugador
            if not player.Character:FindFirstChild("Humanoid") or player.Character.Humanoid.Health <= 0 then
                break
            end

            -- Teletransportar al jugador cerca del boss
            player.Character.HumanoidRootPart.CFrame = CFrame.new(boss.HumanoidRootPart.Position - boss.HumanoidRootPart.CFrame.LookVector * 1, boss.HumanoidRootPart.Position)
            
            -- Simular el evento del clic del ratÃ³n
            VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
            
            -- Enviar el evento de ataque
            local args = {
                false,
                boss.HumanoidRootPart.Position
            }
            ReplicatedStorage.Events:FindFirstChild("Infinite Barrage Fists"):FireServer(unpack(args))
        end
    end
end
end)
