local OrionLib = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()
local VirtualUser = game:GetService("VirtualUser")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer

-- Anti-afk
player.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Limpia objetos en Collectibles
for _, v in pairs(Workspace.Collectibles:GetChildren()) do
    if string.find(v.Name, "") then
        v:Destroy()
    end
end

local Window = OrionLib:MakeWindow({
    Name = "Hashira Hub",
    HidePremium = false,
    SaveConfig = false,
    ConfigFolder = "Hashira"
})

local PlayerTab = Window:MakeTab({
    Name = "Main",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local BoostTab = Window:MakeTab({
    Name = "Boosts",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

local DispenserTab = Window:MakeTab({
    Name = "Dispensers",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Utilidad: FireServer para boosters
local function fireBooster(name)
    local Event = ReplicatedStorage.Events.ToyEvent
    Event:FireServer(name)
end

-- Utilidad: AutoFieldBooster loop
local function autoFieldBoosterLoop(boostType)
    while getgenv()[boostType] do
        fireBooster(boostType)
        wait(5)
    end
end

-- Toggles en BoostTab
BoostTab:AddToggle({
    Name = "Auto All Field Booster",
    Callback = function(v)
        getgenv().AutoAllFieldBooster = v
        if v then
            spawn(function()
                while getgenv().AutoAllFieldBooster do
                    fireBooster("Red Field Booster")
                    fireBooster("Blue Field Booster")
                    fireBooster("Field Booster")
                    wait(5)
                end
            end)
        end
    end
})

BoostTab:AddToggle({
    Name = "Auto Red Field Booster",
    Callback = function(v)
        getgenv().AutoRedFieldBooster = v
        if v then
            spawn(function() autoFieldBoosterLoop("Red Field Booster") end)
        end
    end
})

BoostTab:AddToggle({
    Name = "Auto Blue Field Booster",
    Callback = function(v)
        getgenv().AutoBlueFieldBooster = v
        if v then
            spawn(function() autoFieldBoosterLoop("Blue Field Booster") end)
        end
    end
})

BoostTab:AddToggle({
    Name = "Auto Field Booster",
    Callback = function(v)
        getgenv().AutoFieldBooster = v
        if v then
            spawn(function() autoFieldBoosterLoop("Field Booster") end)
        end
    end
})

-- Dropdown para seleccionar Field
PlayerTab:AddDropdown({
    Name = "Field",
    Default = "Sunflower Field",
    Options = {
        "Sunflower Field", "Dandelion Field", "Blue Flower Field", "Clover Field", 
        "Spider Field", "Bamboo Field", "Strawberry Field", "Pineapple Patch", 
        "Stump Field", "Cactus Field", "Pumpkin Patch", "Pine Tree Forest", 
        "Rose Field", "Mountain Top Field", "Mushroom Field", "Coconut Field", 
        "Pepper Patch"
    },
    Callback = function(selectedField)
        _G.area = selectedField
        _G.cords = Workspace.FlowerZones[_G.area].CFrame
    end
})

-- Equipar máscaras desde el menú
PlayerTab:AddDropdown({
    Name = "Equip Mask",
    Default = "nil",
    Options = {"Gummy Mask", "Demon Mask", "Diamond Mask", "Bubble Mask", "Fire Mask", "Honey Mask"},
    Callback = function(mask)
        local event = ReplicatedStorage.Events.ItemPackageEvent
        local args = {["Mute"] = true, ["Type"] = mask, ["Category"] = "Accessory"}
        event:InvokeServer("Equip", args)
    end
})

-- Auto Convert Pollen
PlayerTab:AddToggle({
    Name = "Auto Convert Pollen",
    Callback = function(v)
        getgenv().AutoPollen = v
        spawn(function()
            while getgenv().AutoPollen do
                local pollenLbl = player.Character:FindFirstChild("ProgressLabel", true)
                local maxPollen = tonumber(pollenLbl.Text:match("%d+$"))
                if player.CoreStats.Pollen.Value >= maxPollen then
                    player.Character:MoveTo(player.SpawnPos.Value.p)
                    ReplicatedStorage.Events.PlayerHiveCommand:FireServer("ToggleHoneyMaking")
                    wait(2)
                end
                wait(0.5)
            end
        end)
    end
})

-- Auto All Dispensers
DispenserTab:AddToggle({
    Name = "Auto All Dispensers",
    Callback = function(v)
        getgenv().AutoDispensers = v
        spawn(function()
            while getgenv().AutoDispensers do
                for _, dispenser in ipairs({
                    "Glue Dispenser", "Wealth Clock", "Coconut Dispenser",
                    "Strawberry Dispenser", "Treat Dispenser", "Free Ant Pass Dispenser",
                    "Blueberry Dispenser", "Honey Dispenser", "Free Royal Jelly Dispenser"
                }) do
                    fireBooster(dispenser)
                end
                wait(10)
            end
        end)
    end
})
